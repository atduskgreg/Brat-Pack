<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
  <head>
    <title>Brat Pack</title>
  </head>
  <script src="http://code.jquery.com/jquery-1.4.2.min.js" ></script>

  <script>
    $(window).load(function () {


      displayProject = function(p){
        result = "<li>";
        result += p.name();
        if(p.running()){
          result += "[<a class='stopApp' href='#' id='"+p.id()+"'>stop app</a>]";
        } else {
          result += "[<a class='startApp' href='#' id='"+p.id()+"'>start app</a>]";
        }
        
        result += "</li>";
        
        return result;
      }
      
      findProject = function(projectID){
        result = null;
        for(var i = 0; i < ProjectManager.projects().length; i++){
        
          if(ProjectManager.projects()[i].id() == projectID){

            result = ProjectManager.projects()[i];
          }
        }
        return result;
      }
      
      displayProjects = function(){
        $("#projectList li").remove();

        for(var i = 0; i < ProjectManager.projects().length; i++){
            project = ProjectManager.projects()[i];            
            $("#projectList").append(displayProject(project));
            
        }
        
        $("#projectList .stopApp").click(function(){
              project = findProject(parseInt($(this).attr('id'))); //ProjectManager.projects()[parseInt($(this).attr('id'))];
              ProjectManager.stop_(project);
              displayProjects();
              return false;
        });
        
         $("#projectList .startApp").click(function(){
              project = findProject(parseInt($(this).attr('id'))); 
              ProjectManager.start_(project);
              displayProjects();
              return false;
        });
      }
        
    });
  </script>
  
  
  <body>
  <h1>Welcome to Brat Pack!</h1>
  
  
  <h2>Project List</h2>
  <ul id="projectList">
  </ul>
  
  </body>
</html>
